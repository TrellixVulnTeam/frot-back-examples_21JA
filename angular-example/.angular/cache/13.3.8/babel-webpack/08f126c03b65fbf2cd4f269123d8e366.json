{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\alanb\\\\IdeaProjects\\\\Aplicacion-Util\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./prueba.service\";\nimport * as i2 from \"@angular/router\";\nexport class AuthGuard {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.session();\n  }\n\n  canActivate(route, state) {\n    if (!this.islogged()) {\n      this.router.navigate(['login']);\n      return false;\n    }\n\n    return true;\n  }\n\n  islogged() {\n    let logged;\n    const obser = this.http.loggedin$.subscribe(value => logged = value);\n    obser.unsubscribe();\n    return logged;\n  }\n\n  session() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let data = yield _this.http.sessionSyn();\n\n      if (data) {\n        _this.http.loginbs();\n\n        let datarol = yield _this.http.isadminSyn();\n\n        if (datarol) {\n          _this.http.admin();\n        }\n      }\n    })();\n  }\n\n}\n\nAuthGuard.ɵfac = function AuthGuard_Factory(t) {\n  return new (t || AuthGuard)(i0.ɵɵinject(i1.PruebaService), i0.ɵɵinject(i2.Router));\n};\n\nAuthGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthGuard,\n  factory: AuthGuard.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/alanb/IdeaProjects/Aplicacion-Util/src/app/auth.guard.ts"],"names":["i0","i1","i2","AuthGuard","constructor","http","router","session","canActivate","route","state","islogged","navigate","logged","obser","loggedin$","subscribe","value","unsubscribe","data","sessionSyn","loginbs","datarol","isadminSyn","admin","ɵfac","AuthGuard_Factory","t","ɵɵinject","PruebaService","Router","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,kBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,MAAMC,SAAN,CAAgB;AACnBC,EAAAA,WAAW,CAACC,IAAD,EAAOC,MAAP,EAAe;AACtB,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL;AACH;;AACDC,EAAAA,WAAW,CAACC,KAAD,EAAQC,KAAR,EAAe;AACtB,QAAI,CAAC,KAAKC,QAAL,EAAL,EAAsB;AAClB,WAAKL,MAAL,CAAYM,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACA,aAAO,KAAP;AACH;;AACD,WAAO,IAAP;AACH;;AACDD,EAAAA,QAAQ,GAAG;AACP,QAAIE,MAAJ;AACA,UAAMC,KAAK,GAAG,KAAKT,IAAL,CAAUU,SAAV,CAAoBC,SAApB,CAA8BC,KAAK,IAAIJ,MAAM,GAAGI,KAAhD,CAAd;AACAH,IAAAA,KAAK,CAACI,WAAN;AACA,WAAOL,MAAP;AACH;;AACKN,EAAAA,OAAO,GAAG;AAAA;;AAAA;AACZ,UAAIY,IAAI,SAAS,KAAI,CAACd,IAAL,CAAUe,UAAV,EAAjB;;AACA,UAAID,IAAJ,EAAU;AACN,QAAA,KAAI,CAACd,IAAL,CAAUgB,OAAV;;AACA,YAAIC,OAAO,SAAS,KAAI,CAACjB,IAAL,CAAUkB,UAAV,EAApB;;AACA,YAAID,OAAJ,EAAa;AACT,UAAA,KAAI,CAACjB,IAAL,CAAUmB,KAAV;AACH;AACJ;AARW;AASf;;AA5BkB;;AA8BvBrB,SAAS,CAACsB,IAAV,GAAiB,SAASC,iBAAT,CAA2BC,CAA3B,EAA8B;AAAE,SAAO,KAAKA,CAAC,IAAIxB,SAAV,EAAqBH,EAAE,CAAC4B,QAAH,CAAY3B,EAAE,CAAC4B,aAAf,CAArB,EAAoD7B,EAAE,CAAC4B,QAAH,CAAY1B,EAAE,CAAC4B,MAAf,CAApD,CAAP;AAAqF,CAAtI;;AACA3B,SAAS,CAAC4B,KAAV,GAAkB,aAAc/B,EAAE,CAACgC,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAE9B,SAAT;AAAoB+B,EAAAA,OAAO,EAAE/B,SAAS,CAACsB,IAAvC;AAA6CU,EAAAA,UAAU,EAAE;AAAzD,CAAtB,CAAhC","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./prueba.service\";\r\nimport * as i2 from \"@angular/router\";\r\nexport class AuthGuard {\r\n    constructor(http, router) {\r\n        this.http = http;\r\n        this.router = router;\r\n        this.session();\r\n    }\r\n    canActivate(route, state) {\r\n        if (!this.islogged()) {\r\n            this.router.navigate(['login']);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    islogged() {\r\n        let logged;\r\n        const obser = this.http.loggedin$.subscribe(value => logged = value);\r\n        obser.unsubscribe();\r\n        return logged;\r\n    }\r\n    async session() {\r\n        let data = await this.http.sessionSyn();\r\n        if (data) {\r\n            this.http.loginbs();\r\n            let datarol = await this.http.isadminSyn();\r\n            if (datarol) {\r\n                this.http.admin();\r\n            }\r\n        }\r\n    }\r\n}\r\nAuthGuard.ɵfac = function AuthGuard_Factory(t) { return new (t || AuthGuard)(i0.ɵɵinject(i1.PruebaService), i0.ɵɵinject(i2.Router)); };\r\nAuthGuard.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: AuthGuard, factory: AuthGuard.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}